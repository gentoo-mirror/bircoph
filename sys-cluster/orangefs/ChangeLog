# ChangeLog for sys-cluster/orangefs
# Copyright 1999-2013 Gentoo Foundation; Distributed under the GPL v2
# $Header: $

  28 Sep 2013; Andrew Savchenko <bircoph@gmail.com>
  orangefs-2.9_beta20130530.ebuild,
  +files/orangefs-2.9_beta20130530-kernapps-lm.patch:
  Fix typo in econf argument. --without can't be used properly for
  path-related arguments. Fix kernapps underlinking with libm.

*orangefs-2.9_beta20130530 (24 Sep 2013)

  24 Sep 2013; Andrew Savchenko <bircoph@gmail.com>
  +orangefs-2.9_beta20130530.ebuild, metadata.xml:
  Version bump. Add new security protocols. Remove not full and poorly
  tested layout patch. Disable hadoop as out-of-tree for now.

*orangefs-2.8.7 (14 Sep 2013)

  14 Sep 2013; Andrew Savchenko <bircoph@gmail.com> -orangefs-2.8.6-r4.ebuild,
  orangefs-2.8.6-r5.ebuild, +orangefs-2.8.7.ebuild, -files/README.Gentoo,
  +files/README.gentoo:
  Version bump. Use readme.gentoo eclass for useful, but large in
  size information. Remove old.

*orangefs-2.8.6-r5 (04 Feb 2013)

  04 Feb 2013; Andrew Savchenko <bircoph@gmail.com> -orangefs-2.8.5-r1.ebuild,
  -files/orangefs-2.8.5-fuse-install.patch,
  -files/orangefs-2.8.5-fuse-perms.patch, -files/orangefs-2.8.5-layout.patch,
  -files/orangefs-2.8.5-linux-3.1.patch, -files/orangefs-2.8.5-linux-3.2.patch,
  -files/orangefs-2.8.5-static-server.patch, -files/orangefs-2.8.5-vis.patch,
  -orangefs-2.8.6-r2.ebuild, -orangefs-2.8.6-r3.ebuild,
  orangefs-2.8.6-r4.ebuild, +orangefs-2.8.6-r5.ebuild,
  -files/orangefs-2.8.6-parallel-make.patch:
  Kernel's up to but not including 3.4 are supported.
  Remove old.

*orangefs-2.8.6-r4 (03 Oct 2012)

  03 Oct 2012; Andrew Savchenko <bircoph@gmail.com> +orangefs-2.8.6-r4.ebuild:
  Update stable snapshot to r9510. This should fix kernel deadlock in
  pvfs2-client introduced in -r3.

  12 Sep 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.6-r3.ebuild,
  files/README.Gentoo:
  Aware of terribly buggy kernel module.
  liborange was removed to liborangefs, no need to block
  app-pda/orange now.

*orangefs-2.8.6-r3 (12 Sep 2012)

  12 Sep 2012; Andrew Savchenko <bircoph@gmail.com> +orangefs-2.8.6-r3.ebuild:
  Apply a new patch from a stable branch which should fix kernel
  module bug for kernels > 2.6.38.

  01 Sep 2012; Andrew Savchenko <bircoph@gmail.com> files/pvfs2-client-conf.d:
  Fix typo in flag example. Fix ordering in client's conf.d

*orangefs-2.8.6-r2 (01 Sep 2012)

  01 Sep 2012; Andrew Savchenko <bircoph@gmail.com> -orangefs-2.8.6-r1.ebuild,
  +orangefs-2.8.6-r2.ebuild, -files/orangefs-2.8.6-ucache.patch:
  Add patch to the latest r9468 snapshot of the stable branch.
  This fixes a lot of bugs, especially in the userspace library.

*orangefs-2.8.6-r1 (31 Aug 2012)

  31 Aug 2012; Andrew Savchenko <bircoph@gmail.com> -orangefs-2.8.6.ebuild,
  +orangefs-2.8.6-r1.ebuild, +files/orangefs-2.8.6-ucache.patch,
  files/README.Gentoo, metadata.xml:
  Add build control over user interface libraries and friends.
  Add ucached and fix its installation.

  30 Aug 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.6.ebuild,
  +files/orangefs-2.8.6-parallel-make.patch:
  fix parallel build in 2.8.6

*orangefs-2.8.6 (30 Aug 2012)

  30 Aug 2012; Andrew Savchenko <bircoph@gmail.com> +orangefs-2.8.6.ebuild,
  +files/orangefs-2.8.6-layout.patch, metadata.xml:
  Update OrangeFS to 2.8.6. Most patches are upstream now.
  Add support for reset-file-pos configure option. Block with
  app-pda/orange due to liborange.so conflict for now.

  31 May 2012; Andrew Savchenko <bircoph@gmail.com> files/README.Gentoo,
  files/pvfs2-client-conf.d, files/pvfs2-client-init.d:
  Add support for pvfs2fuse as pvfs2-client replacement.

  23 Apr 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.5.ebuild:
  orangefs: update infiniband dependency

  openib is not replaced by ofed.

  14 Apr 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.5.ebuild,
  files/README.Gentoo:
  Keep sendfile undefined by default.

  14 Apr 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.5.ebuild,
  +files/README.Gentoo, metadata.xml:
  1) Add kmod-threads flag to control experimental threads support
  in a kernel helper code independently of global threads flag.
  2) Sendfile is now disabled by default as it is designed for large
  files serving only and hurts general performance.
  3) Move most elog messages to a separate documentation file.

  07 Apr 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.5.ebuild:
  Switch to virtual/modutils.

  07 Apr 2012; Andrew Savchenko <bircoph@gmail.com> files/pvfs2-client-init.d:
  Skip commented out entries.

  23 Mar 2012; Andrew Savchenko <bircoph@gmail.com> files/pvfs2-client-conf.d,
  files/pvfs2-client-init.d, files/pvfs2-server-conf.d,
  files/pvfs2-server-init.d:
  Add nice and ionice (for server only) control levels.

  22 Mar 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.5.ebuild:
  orangefs: warn about still unsupported 3.3 kernel

  ...and provide suggestions how to overcome this.

  22 Mar 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.5.ebuild,
  +files/orangefs-2.8.5-linux-3.2.patch:
  Add upstream support for 3.2+ kernels.

  17 Mar 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.5.ebuild:
  Fuse is now fixed, thus change postinstall message.

  13 Mar 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.5.ebuild,
  -files/orangefs-2.8.5-fuse.patch, +files/orangefs-2.8.5-fuse-install.patch,
  +files/orangefs-2.8.5-fuse-perms.patch:
  Fix chmod failure in the fuse client. Patch by upstream.

  12 Mar 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.5.ebuild,
  +files/orangefs-2.8.5-linux-3.1.patch:
  Add upstream support for 3.1/3.2 kernels.

  12 Mar 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.5.ebuild:
  Separate static library and binary dependencies, this adds new
  static-libs USE flag. With USE="static-libs" it is now required
  openssl and open-mx to use the same flag, otherwise build will
  fail.

  Remove --enable-thread-safe flag. Safe threads are enabled by
  default and configure doesn't handle --enable part of this option
  actually causing it to be disabled.

  12 Mar 2012; Andrew Savchenko <bircoph@gmail.com> files/pvfs2-client-conf.d,
  files/pvfs2-client-init.d, files/pvfs2-server-init.d, orangefs-2.8.5.ebuild,
  files/pvfs2-server-conf.d:
  Implement forced umount/shutdown as safe as possible.

  11 Mar 2012; Andrew Savchenko <bircoph@gmail.com> files/pvfs2-client-conf.d,
  files/pvfs2-client-init.d, files/pvfs2-server-init.d:
  Add the following abilities to the client server script:
  1) Optional check for server(s) availability.
  2) Optional forceful unmount with an attempt to work as cleanly as
  possible.
  Use checkpath runscript function.

  08 Mar 2012; Andrew Savchenko <bircoph@gmail.com> files/pvfs2-server-conf.d,
  orangefs-2.8.5.ebuild:
  Install client initd/confd scripts only with USE="modules". Without
  kernel modules pvfs2-client is useless.
  Make postinstall memo shorter and more informational.
  Tune server config file descriptions a bit.

  07 Mar 2012; Andrew Savchenko <bircoph@gmail.com> files/pvfs2-client-conf.d,
  files/pvfs2-client-init.d, files/pvfs2-server-init.d, orangefs-2.8.5.ebuild,
  files/pvfs2-server-conf.d:
  Implement basic client daemon and mounter init script.
  Some minor fixes in server script.

  07 Mar 2012; Andrew Savchenko <bircoph@gmail.com> files/pvfs2-server-conf.d,
  files/pvfs2-server-init.d, orangefs-2.8.5.ebuild:
  Restore the wait option. The server still may fail after a fork.
  Server options must be used on mkfs stage too, especially this
  concerns -a option and multiserver setup.

  05 Mar 2012; Andrew Savchenko <bircoph@gmail.com>
  files/orangefs-2.8.5-layout.patch, files/pvfs2-client-conf.d,
  files/pvfs2-client-init.d, files/pvfs2-server-conf.d,
  files/pvfs2-server-init.d, files/orangefs-2.8.5-static-server.patch:
  orangefs: further fixes and improvements

  - Fix layout patch, move alogorithm control option to the Defaults
  section as LayoutAlgo.
  - Clear shm after server shutdown.
  - Simplify init scripts; wait option for server is needed no
  longer.
  - Remove trailing spaces in patches.

  02 Mar 2012; Andrew Savchenko <bircoph@gmail.com> orangefs-2.8.5.ebuild,
  files/pvfs2-server-conf.d, files/pvfs2-server-init.d,
  files/orangefs-2.8.5-layout.patch, files/orangefs-2.8.5-static-server.patch:
  Fix filesystem check and optional initialization in server init
  script. Remove trailing spaces. Comment out all default options in
  conf.d file.

  01 Mar 2012; Andrew Savchenko <bircoph@gmail.com> files/pvfs2-server-conf.d,
  files/pvfs2-server-init.d:
  Fix filesystem generation in the init script.

*orangefs-2.8.5.ebuild (21 Feb 2012)

  21 Feb 2012; Andrew Savchenko <bircoph@gmail.com>
  +orangefs-2.8.5.ebuild, +metadata.xml,
  +files/orangefs-2.8.5-fuse.patch,
  +files/orangefs-2.8.5-split-kernapps.patch,
  +files/orangefs-2.8.5-static-server.patch,
  +files/orangefs-2.8.5-vis.patch,
  +files/pvfs2-client-conf.d, +files/pvfs2-client-init.d,
  +files/pvfs2-server-conf.d, +fiels/pvfs2-server-init.d:
  This ebuild is vaguely based on the ebuild for pvfs2 which was once
  in the portage. Major changes were made to accomodate new features
  and behaviour.
